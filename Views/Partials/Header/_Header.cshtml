@using Umbraco.Cms.Web.Common;
@inject UmbracoHelper Umbraco;
@using Umbraco.Cms.Core.Services;
@using Umbraco.Cms.Core.Models.Blocks;
@using Umbraco.Cms.Core.Models;
@using Umbraco.Cms.Core.Models.PublishedContent;


@{
    var header = Umbraco.Content(Guid.Parse("f7840b02-6e45-4f68-a33f-d5504d75c3a0"));
    var Logo = header.Value<IPublishedContent>("logo");
    var Links = header.Value<IEnumerable<BlockListItem>>("listHeader");
    
}

<header>
    <a href="/" class="logo"><img src="@Logo.Url()" alt="Logo" /></a>
  <ul>
        @foreach (var link in Links)
        {
            var textLink = link.Content.Value("nameItem");
            var linkUrl = link.Content.Value<Link>("ItemRedirect");


            <li><a href="@linkUrl.Url" class="link">@textLink</a></li>
        }
        <li class="icon-shopping-cart">
            <a href="/shopping-cart/" class="link">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="#FF196D" class="bi bi-cart3" viewBox="0 0 16 16">
                  <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .49.598l-1 5a.5.5 0 0 1-.465.401l-9.397.472L4.415 11H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l.84 4.479 9.144-.459L13.89 4H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                </svg>
            </a><span id="cartItemCount" class="cart-item-count">0</span> <!-- Este span mostrará el número de productos -->
        </li>
  </ul>
</header>
<div class="my-navbar-responsive">
    <div class="my-container my-nav-container">
        <input class="my-checkbox" type="checkbox" name="" id="" />
        <div class="my-logo">
            <a href="/" class="logo"><img src="@Logo.Url()" alt="Logo" /></a>
        </div>
        <div class="my-hamburger-lines">
            <span class="line line1"></span>
            <span class="line line2"></span>
            <span class="line line3"></span>
        </div>
        <div class="my-menu-items hidden">
            <ul>
                @foreach (var link in Links)
                {
                    var textLink = link.Content.Value("nameItem");
                    var linkUrl = link.Content.Value<Link>("ItemRedirect");


                    <li><a href="@linkUrl.Url" class="my-link">@textLink</a></li>
                }
            </ul>
        </div>
    </div>
</div>
<script>
    window.addEventListener('scroll', function () {
        let header = document.querySelector('header');
        header.classList.toggle('sticky', window.scrollY > 0);
    });
</script>
@*Stop Scroll Page*@
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const checkbox = document.querySelector('.checkbox');
        const body = document.body;

        checkbox.addEventListener('change', () => {
            if (checkbox.checked) {
                // Guardar la posición actual de desplazamiento
                const scrollPosition = window.pageYOffset;
                body.style.top = `-${scrollPosition}px`;  // Guardar la posición de desplazamiento en el estilo top
                body.classList.add('no-scroll');  // Añadir la clase no-scroll para fijar la posición del body
            } else {
                // Restaurar la posición de desplazamiento
                const scrollPosition = -parseInt(body.style.top);
                body.classList.remove('no-scroll');  // Quitar la clase no-scroll para permitir el desplazamiento
                window.scrollTo(0, scrollPosition);  // Restaurar la posición de desplazamiento
                body.style.top = '';  // Limpiar el estilo top
            }
        });
    });
</script>
@*Stop Scroll Page*@
<script>
    document.addEventListener('DOMContentLoaded', () => {
    const checkbox = document.querySelector('.my-checkbox');
    const body = document.body;

    checkbox.addEventListener('change', () => {
        if (checkbox.checked) {
            body.classList.add('no-scroll');
        } else {
            body.classList.remove('no-scroll');
        }
    });
});
</script>